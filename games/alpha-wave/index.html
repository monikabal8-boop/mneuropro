<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mneuro: –ê–ª—Ñ–∞ –≤—ä–ª–Ω–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #07070f;
            min-height: 100vh;
            overflow: hidden;
        }

        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .center-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 20;
        }

        .brand {
            font-size: 0.9rem;
            font-weight: 500;
            color: #b388ff;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .icon { font-size: 2.5rem; margin-bottom: 15px; }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 15px;
            text-shadow: 0 0 40px rgba(179, 136, 255, 0.7);
        }

        .subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }

        .instructions {
            font-size: 0.9rem;
            color: #b388ff;
            margin-bottom: 30px;
        }

        .start-btn {
            background: linear-gradient(135deg, #b388ff 0%, #7c4dff 100%);
            color: #fff;
            border: none;
            padding: 20px 70px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .game-ui {
            position: fixed;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 30;
            text-align: center;
            display: none;
        }

        .state-label {
            font-size: 1.2rem;
            color: #fff;
            letter-spacing: 4px;
            text-shadow: 0 0 20px rgba(179, 136, 255, 0.8);
            margin-bottom: 10px;
        }

        .speed-bar-container {
            width: 200px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 0 auto;
        }

        .speed-bar {
            height: 100%;
            background: linear-gradient(90deg, #7c4dff, #b388ff);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .click-hint {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.4);
            z-index: 30;
            display: none;
        }

        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3rem;
            z-index: 100;
            display: none;
        }

        .click-area {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            cursor: pointer;
            display: none;
        }

        .results { display: none; }

        .results-brand {
            font-size: 0.85rem;
            color: #b388ff;
            letter-spacing: 3px;
            margin-bottom: 25px;
        }

        .results-title {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 20px;
        }

        .results-state {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 40px rgba(179, 136, 255, 0.8);
            margin-bottom: 10px;
        }

        .results-message {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }

        .results-detail {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 35px;
        }

        .cta-link {
            display: inline-block;
            color: #b388ff;
            text-decoration: none;
            font-size: 1rem;
            margin-bottom: 25px;
        }

        .restart-btn {
            background: transparent;
            color: #ffffff;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 16px 45px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <a href="/games/" style="position:fixed;top:20px;left:20px;color:rgba(255,255,255,0.5);text-decoration:none;font-size:0.9rem;z-index:100;">‚Üê –ù–∞–∑–∞–¥</a>
    <canvas id="starfield"></canvas>

    <button class="sound-toggle" id="soundToggle">üîä</button>
    <div class="click-area" id="clickArea"></div>

    <div class="center-content" id="startScreen">
        <div class="brand">MNEURO –ò–ì–†–ê</div>
        <div class="icon">üíú</div>
        <h1>–ê–ª—Ñ–∞ –≤—ä–ª–Ω–∞</h1>
        <p class="subtitle">–õ–µ—Ç–∏ –ø—Ä–µ–∑ –∑–≤–µ–∑–¥–∏—Ç–µ.</p>
        <p class="instructions">–ö–ª–∏–∫–∞–π –∑–∞ –¥–∞ –∑–∞–±–∞–≤–∏—à –ø–æ–ª–µ—Ç–∞</p>
        <button class="start-btn" onclick="startGame()">–°—Ç–∞—Ä—Ç</button>
    </div>

    <div class="game-ui" id="gameUI">
        <div class="state-label" id="stateLabel">–ü–û–õ–ï–¢</div>
        <div class="speed-bar-container">
            <div class="speed-bar" id="speedBar"></div>
        </div>
    </div>

    <div class="click-hint" id="clickHint">‚ú¶ –ö–ª–∏–∫–∞–π –∑–∞ –∑–∞–±–∞–≤—è–Ω–µ ‚ú¶</div>

    <div class="center-content results" id="resultsScreen">
        <div class="results-brand">MNEURO</div>
        <p class="results-title">–¢–∏ –¥–æ—Å—Ç–∏–≥–Ω–∞</p>
        <div class="results-state" id="resultState"></div>
        <div class="results-message" id="resultMessage"></div>
        <p class="results-detail" id="resultDetail"></p>
        <a href="https://www.monikabalayan.com/kursove" class="cta-link">–û—Ç–∫—Ä–∏–π –∫—É—Ä—Å–æ–≤–µ—Ç–µ –Ω–∞ Mneuro ‚Üí</a>
        <br><br>
        <button class="restart-btn" onclick="restartGame()">–ò–≥—Ä–∞–π –æ—Ç–Ω–æ–≤–æ</button>
    </div>

    <audio id="bgMusic" loop preload="auto">
        <source src="music-relax.mp3" type="audio/mpeg">
    </audio>

    <script>
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        const music = document.getElementById('bgMusic');
        music.volume = 0.5;

        let speed = 1; // 1 = fast, 0.1 = slow
        let gameRunning = false;
        let soundEnabled = true;
        let gameTimeout;
        let animationId;
        let stars = [];

        const colors = ['#ffffff', '#ffcccc', '#ccffff', '#ffffcc', '#ffccff', '#ccffcc', '#ffd700', '#ff69b4', '#87ceeb'];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        // Star - flies from center outward
        class Star {
            constructor() {
                this.reset();
            }

            reset() {
                // Angle from center
                this.angle = Math.random() * Math.PI * 2;
                // Distance from center (start near center)
                this.dist = Math.random() * 50 + 5;
                // Speed multiplier
                this.speedMult = Math.random() * 0.5 + 0.75;
                // Size
                this.size = Math.random() * 2 + 1;
                // Color
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                // Move outward from center
                this.dist += 3 * speed * this.speedMult;

                // Reset when off screen
                const maxDist = Math.max(canvas.width, canvas.height);
                if (this.dist > maxDist) {
                    this.reset();
                }
            }

            draw() {
                const cx = canvas.width / 2;
                const cy = canvas.height / 2;

                const x = cx + Math.cos(this.angle) * this.dist;
                const y = cy + Math.sin(this.angle) * this.dist;

                // Size grows as it gets further
                const size = this.size * (1 + this.dist / 300);

                // Opacity grows as it gets further
                const opacity = Math.min(1, this.dist / 150);

                // Draw 4-pointed star
                ctx.save();
                ctx.translate(x, y);
                ctx.globalAlpha = opacity;
                ctx.fillStyle = this.color;

                // Simple 4-point star shape
                ctx.beginPath();
                ctx.moveTo(0, -size);
                ctx.lineTo(size * 0.3, 0);
                ctx.lineTo(0, size);
                ctx.lineTo(-size * 0.3, 0);
                ctx.closePath();
                ctx.fill();

                ctx.beginPath();
                ctx.moveTo(-size, 0);
                ctx.lineTo(0, size * 0.3);
                ctx.lineTo(size, 0);
                ctx.lineTo(0, -size * 0.3);
                ctx.closePath();
                ctx.fill();

                ctx.restore();
            }
        }

        function initStars() {
            stars = [];
            for (let i = 0; i < 200; i++) {
                const s = new Star();
                // Spread initial stars across screen
                s.dist = Math.random() * Math.max(canvas.width, canvas.height);
                stars.push(s);
            }
        }

        function animate() {
            // Clear
            ctx.fillStyle = '#07070f';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Subtle center glow
            const glow = ctx.createRadialGradient(
                canvas.width/2, canvas.height/2, 0,
                canvas.width/2, canvas.height/2, 200
            );
            glow.addColorStop(0, 'rgba(100, 50, 150, 0.15)');
            glow.addColorStop(1, 'transparent');
            ctx.fillStyle = glow;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw stars
            for (let star of stars) {
                star.update();
                star.draw();
            }

            animationId = requestAnimationFrame(animate);
        }

        function updateUI() {
            const pct = speed * 100;
            document.getElementById('speedBar').style.width = pct + '%';

            let state;
            if (speed > 0.7) state = '–ü–û–õ–ï–¢';
            else if (speed > 0.4) state = '–ó–ê–ë–ê–í–Ø–ù–ï...';
            else if (speed > 0.15) state = '–°–ü–û–ö–û–ô–°–¢–í–ò–ï';
            else state = '‚ú¶ –î–™–õ–ë–û–ö–ê –ê–õ–§–ê ‚ú¶';

            document.getElementById('stateLabel').textContent = state;
        }

        function handleClick() {
            if (!gameRunning) return;
            // Slow down 12% each click
            speed = Math.max(0.05, speed * 0.88);
            updateUI();
        }

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameUI').style.display = 'block';
            document.getElementById('clickHint').style.display = 'block';
            document.getElementById('clickArea').style.display = 'block';
            document.getElementById('soundToggle').style.display = 'block';

            speed = 1;
            gameRunning = true;
            updateUI();

            if (soundEnabled) {
                music.currentTime = 0;
                music.play().catch(e => {});
            }

            document.getElementById('clickArea').onmousedown = handleClick;
            document.getElementById('clickArea').ontouchstart = (e) => {
                e.preventDefault();
                handleClick();
            };

            gameTimeout = setTimeout(endGame, 35000);
        }

        function endGame() {
            gameRunning = false;
            clearTimeout(gameTimeout);

            document.getElementById('gameUI').style.display = 'none';
            document.getElementById('clickHint').style.display = 'none';
            document.getElementById('clickArea').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';

            let state, message, detail;
            if (speed <= 0.15) {
                state = "‚ú¶ –î–™–õ–ë–û–ö–ê –ê–õ–§–ê ‚ú¶";
                message = "–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ! –ú–æ–∑—ä–∫—ä—Ç —Ç–∏ –µ –≤ –ø—ä–ª–µ–Ω —Ä–µ–ª–∞–∫—Å.";
                detail = "–ì–æ—Ç–æ–≤ —Å–∏ –∑–∞ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª–µ–Ω —Å—ä–Ω.";
            } else if (speed <= 0.4) {
                state = "–ê–õ–§–ê –°–™–°–¢–û–Ø–ù–ò–ï";
                message = "–ú–Ω–æ–≥–æ –¥–æ–±—Ä–µ! –î–æ—Å—Ç–∏–≥–Ω–∞ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ.";
                detail = "–¢—è–ª–æ—Ç–æ —Å–µ –æ—Ç–ø—É—Å–∫–∞, —É–º—ä—Ç –µ —Ç–∏—Ö.";
            } else if (speed <= 0.7) {
                state = "–†–ï–õ–ê–ö–°";
                message = "–î–æ–±—Ä–æ –∑–∞–±–∞–≤—è–Ω–µ!";
                detail = "–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–π –¥–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—à.";
            } else {
                state = "–ê–ö–¢–ò–í–ï–ù –£–ú";
                message = "–£–º—ä—Ç –µ –æ—â–µ –±—É–¥–µ–Ω.";
                detail = "–ö–ª–∏–∫–∞–π –ø–æ-—á–µ—Å—Ç–æ —Å–ª–µ–¥–≤–∞—â–∏—è –ø—ä—Ç.";
            }

            document.getElementById('resultState').textContent = state;
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('resultDetail').textContent = detail;
        }

        function restartGame() {
            document.getElementById('resultsScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            music.pause();
            speed = 1;
        }

        document.getElementById('soundToggle').onclick = () => {
            soundEnabled = !soundEnabled;
            document.getElementById('soundToggle').textContent = soundEnabled ? 'üîä' : 'üîá';
            if (soundEnabled && gameRunning) music.play();
            else music.pause();
        };

        // Start
        initStars();
        animate();
    </script>
</body>
</html>
